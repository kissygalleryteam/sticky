<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>sticky</title>
    <link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://docs.kissyui.com/1.4/source/guideline/templates/assets/com-prettify.css">
    <link rel="stylesheet" href="http://docs.kissyui.com/1.4/source/guideline/templates/assets/com.css">
    <script src="http://cdn.staticfile.org/jquery/2.1.1-rc2/jquery.min.js"></script>
    <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="http://cdn.staticfile.org/prettify/r298/prettify.min.js"></script>
    <script src="http://g.tbcdn.cn/kissy/k/1.4.8/seed-min.js" data-config="{combine:true}"></script>
  </head>
  <body data-spy="scroll" data-target=".bs-docs-sidebar">
    <div id="header"><a href="http://docs.kissyui.com/" class="logo">kissy</a>
      <nav><a href="http://docs.kissyui.com/1.4/docs/html/coms.html">优秀组件推荐</a></nav>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3 bs-docs-sidebar">
          <ul data-spy="affix" data-offset-top="0" class="nav nav-list bs-docs-sidenav"></ul>
        </div>
        <div class="span9 bs-docs-content">
          <h1 data-id="undefined" class="title">sticky</h1>
          <p class="author-wrapper"><span>组件有问题？旺旺联系作者：</span><a href="https://github.com/alvis-m" target="_blank" data-name="函谷" class="author"><img src="https://avatars.githubusercontent.com/u/2010290?v=2&amp;s=60" alt="函谷"></a><span class="author-name">函谷</span>
          </p>
          <div class="common-link"><a href="../demo/index.html" target="_blank" class="demo">示例</a><a href="https://github.com/kissygalleryteam/sticky" target="_blank" class="source">源码</a></div>
          <p class="com-info"><span class="info-label">View</span><span data-com="sticky" class="J_View">535</span></p>
          <p class="com-info"><span class="info-label">所属分类</span><a href="http://kpm.taobao.net/list/布局">布局</a>
          </p>
          <p class="com-info"><span class="info-label">kissy版本</span><span>1.4.X</span>
          </p><h2 id="-">综述</h2>
<p>sticky 组件是 CSS 属性 position:sticky 的 JS 实现。</p>
<p>position:sticky 是一个新的 CSS3 属性，它的表现类似 position:relative 和 position:fixed 的合体，在目标区域在屏幕中可见时，它的行为就像 position:relative ; 而当页面滚动超出目标区域时，它的表现就像 position:fixed ，它会固定在目标位置。</p>
<p>实现原理是支持 position: sticky 的直接使用 CSS 实现, 不支持的浏览器(除 IE6 外)使用 position: fixed，对 IE6 使用 position:absolute。</p>
<p>sticky 组件参考了 <a href="http://aralejs.org/sticky/">Arale Sticky</a> 的实现，并对其做了一些扩展。</p>
<ul>
<li>版本：2.0.0</li>
<li>作者：函谷</li>
<li>标签：sticky, fixed兼容</li>
<li>demo：<a href="http://kg.kissyui.com/sticky/2.0.0/demo/index.html">http://kg.kissyui.com/sticky/2.0.0/demo/index.html</a></li>
</ul>
<h2 id="-">初始化组件</h2>
<pre><code>S.use(&#39;kg/sticky/2.0.0/index&#39;, function (S, Sticky) {
    // 创建一个 sticky 元素
    var sticky = new Sticky({
               el: &#39;#stick&#39;,
            top: 30, 
            target: &#39;body&#39;,
            callback: function(status) { 
              }
        });

     // 创建一个 fixed 元素
     Sticky.fixed(&#39;#fixed&#39;);
});
</code></pre><h2 id="api-">API说明</h2>
<h4 id="new-sticky-config-">new Sticky({config})</h4>
<ul>
<li><p><code>el</code> {String|HTMLElement} </p>
<p>  需要跟随滚动的目标元素</p>
</li>
<li><p><code>target</code> {String|HTMLElement} </p>
<p>  IE6下计算定位的父元素，默认为body</p>
</li>
<li><p><code>top</code> {Number} </p>
<p>  基于顶部跟随滚动时设置；当元素距离当前可视窗口顶部的距离等于这个值时，开始触发跟随状态。</p>
</li>
<li><p><code>bottom</code> {Number} </p>
<p>  基于底部跟随滚动时设置；当元素距离当前可视窗口底部的距离等于这个值时，开始触发跟随状态。</p>
</li>
<li><p><code>callback</code> {Function} </p>
<p>  更改状态的回调函数，具有一个参数 status, 为 true 表示是 stick 状态, 为 false 为 unstick 状态。</p>
</li>
</ul>
<p>需要注意的是：</p>
<p>1) 当同时设置 top 和 bottom 的值时，只有 top 会生效。</p>
<p>2) Sticky 对于 position: static or relative 且 display 不为 none 的情况下, 会在当前元素后面插入宽高与元素相同的占位符，防止页面布局被破坏。</p>
<h4 id="sticky-fixed-el-">Sticky.fixed(el)</h4>
<ul>
<li><p><code>el</code> {String|HTMLElement} </p>
<p>  设置fixed的目标元素，元素的 top 和 left 需在 CSS 中自行设置</p>
</li>
</ul>
<h2 id="-">方法说明</h2>
<ul>
<li><p><code>refresh()</code></p>
<p> 刷新元素位置，在页面内容高度发生变化时需要重新计算元素位置，即可调用此方法。</p>
<p> 注意：在基于底部跟随滚动时，在 window.resize 时需要重新计算位置。针对此问题，Sticky 在非IE浏览器中直接绑定了此方法，在 IE 下中由于 resize 会重复触发，造成浏览器假死，因此未做处理。</p>
</li>
<li><p><code>destroy()</code></p>
<p> 销毁sticky对象，并重置元素位置。</p>
</li>
</ul>
<h2 id="changelog">changelog</h2>
<h3 id="v2-0-0">V2.0.0</h3>
<ul>
<li>增加配置项target：用于在IE6下指定用于计算的定位父元素，默认为body</li>
<li>修复IE7下left计算错误的问题</li>
</ul>
<h3 id="v1-0">V1.0</h3>
<ul>
<li>实现页面基于顶部sticky或者基于底部sticky</li>
<li>实现兼容各浏览器的fixed效果</li>
</ul>

          <div style="display:none;"><script type="text/javascript" src="http://tajs.qq.com/stats?sId=36378479" charset="UTF-8"></script></div>
          <script src="http://docs.kissyui.com/1.4/source/guideline/templates/assets/com.js"></script>
        </div>
      </div>
    </div>
  </body>
</html>